require_relative '../helper'

describe ConceptQL::Operators::Snomed do
  it "should produce correct results" do
    criteria_ids(
      [:snomed, '271594007']
    ).must_equal("condition_occurrence"=>[1, 292, 337, 1196, 1452, 1659, 1965, 2120, 2125, 2651, 2903, 3218, 3319, 3335, 4005, 5084, 5275, 5563, 5610, 5734, 6869, 6958, 8287, 8621, 9000, 9107, 9647, 9824, 10382, 10485, 11163, 11289, 12100, 14158, 14590, 14701, 15190, 16361, 16438, 16478, 18614, 18672, 19606, 19900, 20068, 20588, 20777, 20902, 21343, 21898, 22472, 22538, 22672, 23070, 23362, 24517, 24835, 24876, 25239, 25388, 25603, 26053, 27154, 27507, 27643, 27692, 27787, 27975, 28379, 28866, 29315, 30039, 30273, 31055, 31289, 31428, 32648, 33574, 33983, 34305])
  end

  it "should also implement snomed_condition" do
    criteria_ids(
      [:snomed_condition, '271594007']
    ).must_equal("condition_occurrence"=>[1, 292, 337, 1196, 1452, 1659, 1965, 2120, 2125, 2651, 2903, 3218, 3319, 3335, 4005, 5084, 5275, 5563, 5610, 5734, 6869, 6958, 8287, 8621, 9000, 9107, 9647, 9824, 10382, 10485, 11163, 11289, 12100, 14158, 14590, 14701, 15190, 16361, 16438, 16478, 18614, 18672, 19606, 19900, 20068, 20588, 20777, 20902, 21343, 21898, 22472, 22538, 22672, 23070, 23362, 24517, 24835, 24876, 25239, 25388, 25603, 26053, 27154, 27507, 27643, 27692, 27787, 27975, 28379, 28866, 29315, 30039, 30273, 31055, 31289, 31428, 32648, 33574, 33983, 34305])
  end
end

